
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CGGeometry - Summerrose’s Blog</title>
  <meta name="author" content="ghren">

  
  <meta name="description" content="CGGeometry 是一个 Quartz 2D 框架中非常有用且好用的处理几何问题的基本组件，这里列出一些它的方法并简单说明如何使用。 变换 CGRectOffset CGRectOffset: 返回一个原点在源矩形基础上进行了偏移的矩形。 1
2
3
4
5
CGRect &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alex1212112.github.io/blog/2014/07/01/cggeometry">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Summerrose’s Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,700&subset=latin" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>



  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <nav id="main-nav" role="navigation">
<ul class="main-navigation">
  <li><a href="/" class="nav-link">Blog</a></li>
  <li><a href="/blog/archives" class="nav-link">Archives</a></li>
  <li><a href="/atom.xml" class="nav-link">RSS</a></li>
</ul>

</nav>
  
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">CGGeometry</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T12:35:54+08:00" pubdate data-updated="true"></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://alex1212112.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="/images/201407011244.png" alt="" /></p>

<p>CGGeometry 是一个 Quartz 2D 框架中非常有用且好用的处理几何问题的基本组件，这里列出一些它的方法并简单说明如何使用。</p>

<h3 id="section">变换</h3>

<h4 id="cgrectoffset">CGRectOffset</h4>

<p>CGRectOffset: 返回一个原点在源矩形基础上进行了偏移的矩形。</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="bp">CGRect</span> <span class="n">CGRectOffset</span><span class="p">(</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="n">rect</span><span class="p">,</span> <span class="c1">//源矩形</span>
</span><span class="line">  <span class="n">CGFloat</span> <span class="n">dx</span><span class="p">,</span>  <span class="c1">//x方向偏移距离</span>
</span><span class="line">  <span class="n">CGFloat</span> <span class="n">dy</span>   <span class="c1">//y方向偏移距离</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>为什么要用 CGRectOffset ？<a href="http://nshipster.cn/cggeometry/">NSHipster</a>解释如下:</p>

<blockquote>
  <p>它不仅能让你在同时改变水平和垂直位置的时候减少一行代码，更重要的是，它所表示的平移比直接分开操作原点的值更具有几何意义。</p>
</blockquote>

<h4 id="cgrectinset">CGRectInset</h4>

<p>CGRectInset: 返回一个与源矩形共中心点的，或大些或小些的新矩形。</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="bp">CGRect</span> <span class="n">CGRectInset</span><span class="p">(</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="n">rect</span><span class="p">,</span> <span class="c1">//源矩形</span>
</span><span class="line">  <span class="n">CGFloat</span> <span class="n">dx</span><span class="p">,</span>  <span class="c1">// x方向左边减去dx，右边也减去dx（共2dx）</span>
</span><span class="line">  <span class="n">CGFloat</span> <span class="n">dy</span>   <span class="c1">// y方向上边减去dy，右边也减去dy（共2dy）</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>如果用 CGRectInset 作为缩放矩形的快捷方法，一般通用的做法是嵌套调用CGRectOffset，把CGRectInset的返回值作为CGRectOffset的参数。</p>

<p>如：</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="bp">CGRect</span> <span class="n">frame</span> <span class="err">＝</span> <span class="n">CGRectOffset</span><span class="p">(</span><span class="n">CGRectInset</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="mf">10.0f</span><span class="p">,</span> <span class="mf">10.0f</span><span class="p">),</span> <span class="mf">10.0f</span><span class="p">,</span> <span class="mf">10.0f</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

<p>上述代码把源矩形rect的大小缩小了10，然后又向右平移了10，向下平移了10，</p>

<h4 id="cgrectintegral">CGRectIntegral</h4>

<p>CGRectIntegral: 返回包围源矩形的最小整数矩形。</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="bp">CGRect</span> <span class="n">CGRectIntegral</span> <span class="p">(</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="n">rect</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>CGRectIntegral 用来对矩形取整，可以保证矩形对齐到像素边界，在非retina屏幕上能防止像素模糊。</p>

<h3 id="section-1">取值辅助函数</h3>

<h4 id="cgrectgetminmidmaxxy">CGRectGet[Min|Mid|Max][X|Y]</h4>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMinX</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span> <span class="c1">//获取矩形x坐标的最小值</span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMinY</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span> <span class="c1">//获取矩形y坐标的最小值 </span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMidX</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span><span class="c1">//获取矩形x坐标的中间值 </span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMidY</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span> <span class="c1">//获取矩形y坐标的中间值 </span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMaxX</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span> <span class="c1">// 获取矩形x坐标的最大值 </span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetMaxY</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span><span class="err">）</span> <span class="c1">// 获取矩形y坐标的最大值 </span>
</span></code></pre></td></tr></table></div></figure>

<p>引用<a href="http://nshipster.cn/cggeometry/">NSHipster</a>说明如下：</p>

<blockquote>
  <p>用这些函数代替诸如frame.origin.x + frame.size.width之类的代码将更加清晰、语义上更为生动的（特别是用取中间和取最大函数）</p>
</blockquote>

<h4 id="cgrectgetwidthheight">CGRectGet[Width|Height]</h4>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetHeight</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span> <span class="c1">//获取矩形的高</span>
</span><span class="line"><span class="n">CGFloat</span>  <span class="n">CGRectGetWidth</span>  <span class="p">(</span><span class="bp">CGRect</span> <span class="n">rect</span><span class="p">)</span>  <span class="c1">//获取矩形的宽</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="section-2">常量</h3>

<h4 id="cgrectzero">CGRectZero</h4>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">const</span> <span class="bp">CGRect</span> <span class="n">CGRectZero</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>

<p>一个原点在(0, 0)，且长宽均为 0 的常数矩形。这个零矩形与 CGRectMake(0.0f, 0.0f, 0.0f, 0.0f) 是等价的。当我们初始化一个视图时，它们的边框通常设置为CGRectZero，把具体的布局放到 -layoutSubviews中。</p>

<h4 id="cgrectnull">CGRectNull</h4>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">const</span> <span class="bp">CGRect</span> <span class="n">CGRectNull</span><span class="err">；</span>
</span></code></pre></td></tr></table></div></figure>

<p>空矩形。这个会在，比如说，求两个不相交的矩形的相交部分时返回。注意，空矩形不是零矩形。</p>

<h4 id="cgrectinfinite">CGRectInfinite</h4>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">const</span> <span class="bp">CGRect</span> <span class="n">CGRectInfinite</span><span class="err">；</span>
</span></code></pre></td></tr></table></div></figure>

<p>无穷大矩形,它与所有的点或矩形相交，包含所有矩形，且它与任何矩形的并集等于它自身。可以用 CGRectIsInfinite 来检查一矩形是否为无限大。</p>

<h3 id="section-3">分割矩形</h3>

<h4 id="cgrectdivide">CGRectDivide</h4>

<p>CGRectDivide: 将源矩形分为两个子矩形。</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">void</span> <span class="n">CGRectDivide</span><span class="p">(</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="n">rect</span><span class="p">,</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="o">*</span><span class="n">slice</span><span class="p">,</span>
</span><span class="line">  <span class="bp">CGRect</span> <span class="o">*</span><span class="n">remainder</span><span class="p">,</span>
</span><span class="line">  <span class="n">CGFloat</span> <span class="n">amount</span><span class="p">,</span>
</span><span class="line">  <span class="bp">CGRectEdge</span> <span class="n">edge</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>CGRectDivide 用以下方式将矩形分割为两部分：</p>

<ul>
  <li>
    <p>传入一个矩形并选择一条边（edge）（上，下，左，右）；</p>
  </li>
  <li>
    <p>平行那个边在矩形里量出amount的长度；</p>
  </li>
  <li>
    <p>从edge 到量出的amount区域都保存到slice 参数中；</p>
  </li>
  <li>
    <p>剩余的部分保存到remainder 参数中。</p>
  </li>
</ul>

<p>其中 edge 参数是一个CGRectEdge 枚举类型：</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">enum</span> <span class="bp">CGRectEdge</span> <span class="p">{</span>
</span><span class="line">   <span class="n">CGRectMinXEdge</span><span class="p">,</span> <span class="c1">//矩形的左边</span>
</span><span class="line">   <span class="n">CGRectMinYEdge</span><span class="p">,</span> <span class="c1">//矩形的上边</span>
</span><span class="line">   <span class="n">CGRectMaxXEdge</span><span class="p">,</span> <span class="c1">//矩形的右边</span>
</span><span class="line">   <span class="n">CGRectMaxYEdge</span>  <span class="c1">//矩形的下边</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="section-4">比较</h3>

<p>判断两个点是否相等</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGPointEqualToPoint</span> <span class="p">(</span><span class="bp">CGPoint</span> <span class="n">A</span><span class="p">,</span><span class="bp">CGPoint</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>CGSizeAB是否相等</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGSizeEqualToSize</span> <span class="p">(</span><span class="bp">CGSize</span> <span class="n">A</span><span class="err">，</span><span class="bp">CGSize</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>矩形AB的位置大小是否相等</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectEqualToRect</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="err">，</span><span class="bp">CGRect</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>
<p>矩形AB是否相交</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectIntersectsRect</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="err">，</span><span class="bp">CGRect</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="section-5">包含关系</h3>

<p>检测矩形A是否包含指定的点B</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectContainsPoint</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="p">,</span> <span class="bp">CGPoint</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>检测矩形A是否包含矩形B</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectContainsRect</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="err">，</span><span class="bp">CGRect</span> <span class="n">B</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="section-6">检测矩形是否存在或是无穷大</h3>

<p>矩形A是否长和宽都是0，或者是个NULL</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectIsEmpty</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>
<p>矩形A是否为NULL</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectIsNull</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>
<p>矩形A是否无穷大，没有边界</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="kt">bool</span>  <span class="n">CGRectIsInfinite</span> <span class="p">(</span><span class="bp">CGRect</span> <span class="n">A</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="section-7">参考资料</h3>

<p><a href="http://nshipster.cn/cggeometry/">NSHipster</a>;</p>

<p><a href="http://www.cnblogs.com/xuling/archive/2012/02/09/2343427.html">Objective-c 中CGGeometry几何类常用方法简单整理</a>;</p>

<p><a href="https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html">CGGeometry Reference</a>;</p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">ghren</span></span>

      








  


<time datetime="2014-07-01T12:35:54+08:00" pubdate data-updated="true"></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://alex1212112.github.io/blog/2014/07/01/cggeometry/" data-via="" data-counturl="http://alex1212112.github.io/blog/2014/07/01/cggeometry/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/06/30/kvcjian-jie/" title="Previous Post: KVC 简介">&laquo; KVC 简介</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/07/16/ioszhong-de-duan-dian-xu-chuan/" title="Next Post: iOS 中的断点续传">iOS 中的断点续传 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - ghren -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'alex1212112';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://alex1212112.github.io/blog/2014/07/01/cggeometry/';
        var disqus_url = 'http://alex1212112.github.io/blog/2014/07/01/cggeometry/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
